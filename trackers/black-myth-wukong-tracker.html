<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Myth: Wukong - Journey Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Noto+Serif+SC:wght@400;600;700;900&family=Crimson+Pro:wght@400;600&family=Trade+Winds&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --gold: #D4AF37;
            --red: #C41E3A;
            --dark-red: #8B0000;
            --black: #0A0A0A;
            --dark-brown: #1A0F0A;
            --charcoal: #1C1C1C;
            --stone: #2A2520;
            --light-stone: #3A342F;
            --off-white: #F5F0E8;
            --paper: #E8DCC8;
            --bronze: #CD7F32;
            --jade: #00A86B;
            --shadow: rgba(0, 0, 0, 0.8);
        }

        body {
            font-family: 'Crimson Pro', serif;
            background: linear-gradient(135deg, var(--dark-brown) 0%, var(--black) 50%, var(--charcoal) 100%);
            color: var(--off-white);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 0, 0, 0.03) 2px,
                    rgba(0, 0, 0, 0.03) 4px
                );
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 2;
        }

        header {
            text-align: center;
            padding: 0;
            position: relative;
            background: url('data:image/jpeg;base64,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') center/cover no-repeat;
            background-blend-mode: overlay;
            background-color: rgba(10, 10, 10, 0.7);
            border: 2px solid rgba(58, 52, 47, 0.5);
            border-radius: 16px;
            margin-bottom: 2rem;
            animation: fadeInDown 0.8s ease-out;
            box-shadow: 0 8px 32px var(--shadow);
            min-height: 320px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        h1 {
            font-family: 'Trade Winds', cursive;
            font-size: 3rem;
            font-weight: 400;
            color: #F5F0E8;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            text-shadow: 
                2px 2px 4px rgba(0, 0, 0, 0.8),
                0 0 20px rgba(212, 175, 55, 0.3);
            line-height: 1.3;
        }

        h1 .subtitle-inline {
            display: block;
            font-family: 'Trade Winds', cursive;
            font-size: 0.85em;
            letter-spacing: 0.15em;
            margin-top: 0.2rem;
        }

        .subtitle {
            font-family: 'Noto Serif SC', serif;
            font-size: 0.9rem;
            color: #E8DCC8;
            letter-spacing: 0.3em;
            font-weight: 400;
            text-transform: uppercase;
            margin-bottom: 2rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
        }

        .youtube-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.9rem 2.5rem;
            background: #FF0000;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 0.95rem;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
            text-transform: uppercase;
            border: none;
        }

        .youtube-link:hover {
            background: #CC0000;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 0, 0, 0.4);
        }

        .youtube-icon {
            width: 20px;
            height: 20px;
        }

        .tabs {
            display: flex;
            gap: 3rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--stone);
            animation: fadeIn 1s ease-out 0.3s both;
        }

        .tab {
            font-family: 'Cinzel', serif;
            font-size: 1rem;
            font-weight: 400;
            padding: 0.75rem 0;
            background: transparent;
            color: var(--paper);
            border: none;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--red);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .tab:hover {
            color: var(--gold);
        }

        .tab.active {
            color: var(--red);
        }

        .tab.active::after {
            transform: scaleX(1);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            padding: 0;
            background: transparent;
            border-radius: 0;
            border: none;
            box-shadow: none;
        }

        .playthrough-selector {
            flex: 0 0 auto;
            min-width: 250px;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .playthrough-selector label {
            font-family: 'Cinzel', serif;
            font-weight: 400;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 0;
            color: var(--paper);
            letter-spacing: 0.05em;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .playthrough-selector select {
            padding: 0.6rem 1rem;
            background: rgba(26, 15, 10, 0.6);
            color: var(--off-white);
            border: 1px solid var(--stone);
            border-radius: 4px;
            font-size: 0.95rem;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .playthrough-selector select:hover {
            border-color: var(--bronze);
            background: rgba(26, 15, 10, 0.8);
        }

        .playthrough-selector select:focus {
            outline: none;
            border-color: var(--gold);
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }

        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: nowrap;
        }

        button:not(.tab) {
            padding: 0.6rem 1.5rem;
            font-family: 'Cinzel', serif;
            font-weight: 600;
            font-size: 0.85rem;
            border: 1px solid;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .btn-export {
            background: transparent;
            color: var(--paper);
            border-color: var(--stone);
        }

        .btn-export:hover {
            background: rgba(0, 168, 107, 0.1);
            border-color: var(--jade);
            color: var(--jade);
            transform: none;
            box-shadow: none;
        }

        .btn-reset {
            background: transparent;
            color: var(--paper);
            border-color: var(--stone);
        }

        .btn-reset:hover {
            background: rgba(205, 127, 50, 0.1);
            border-color: var(--bronze);
            color: var(--bronze);
            transform: none;
            box-shadow: none;
        }

        .btn-reset-all {
            background: transparent;
            color: var(--paper);
            border-color: var(--stone);
        }

        .btn-reset-all:hover {
            background: rgba(196, 30, 58, 0.1);
            border-color: var(--red);
            color: var(--red);
            transform: none;
            box-shadow: none;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
            margin-bottom: 2rem;
            background: linear-gradient(135deg, rgba(26, 15, 10, 0.6) 0%, rgba(28, 28, 28, 0.6) 100%);
            border: 2px solid var(--stone);
            border-radius: 12px;
            overflow: hidden;
        }

        .stat-card {
            background: transparent;
            padding: 2rem 1.5rem;
            border-radius: 0;
            border: none;
            border-right: 1px solid var(--stone);
            box-shadow: none;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            text-align: center;
        }

        .stat-card:last-child {
            border-right: none;
        }

        .stat-card:hover {
            transform: none;
            background: rgba(212, 175, 55, 0.05);
            box-shadow: none;
        }

        .stat-card::before {
            display: none;
        }

        .stat-label {
            font-family: 'Cinzel', serif;
            font-size: 0.75rem;
            color: var(--paper);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 1rem;
            font-weight: 400;
        }

        .stat-value {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gold);
            text-shadow: 0 2px 10px rgba(212, 175, 55, 0.3);
        }

        .progress-bar-container {
            display: none;
        }

        .video-list {
            display: grid;
            gap: 1rem;
        }

        .video-item {
            background: linear-gradient(135deg, rgba(26, 15, 10, 0.4) 0%, rgba(28, 28, 28, 0.4) 100%);
            padding: 1.5rem 2rem;
            border-radius: 8px;
            border: 1px solid var(--stone);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .video-item:hover {
            background: linear-gradient(135deg, rgba(26, 15, 10, 0.6) 0%, rgba(28, 28, 28, 0.6) 100%);
            border-color: var(--bronze);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow);
        }

        .video-item.completed {
            background: linear-gradient(135deg, rgba(0, 168, 107, 0.15) 0%, rgba(0, 139, 90, 0.1) 100%);
            border-color: var(--jade);
        }

        .video-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .video-checkbox {
            width: 28px;
            height: 28px;
            cursor: pointer;
            accent-color: var(--jade);
            flex-shrink: 0;
        }

        .video-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .video-title {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            font-weight: 400;
            color: var(--off-white);
            line-height: 1.5;
        }

        .video-title .part-number {
            color: var(--gold);
            margin-right: 0.5rem;
        }

        .video-meta {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .video-duration {
            font-family: 'Crimson Pro', serif;
            color: var(--paper);
            font-weight: 400;
            font-size: 0.9rem;
        }

        .video-part-badge {
            background: transparent;
            padding: 0.35rem 1.25rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-family: 'Cinzel', serif;
            color: var(--gold);
            border: 1px solid var(--stone);
            letter-spacing: 0.1em;
            font-weight: 400;
            flex-shrink: 0;
        }

        .timestamp-section {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--stone);
        }

        .timestamp-input {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .timestamp-label {
            font-family: 'Cinzel', serif;
            font-size: 0.85rem;
            color: var(--paper);
            letter-spacing: 0.05em;
            text-transform: uppercase;
            min-width: 100px;
        }

        .timestamp-input input {
            flex: 0 0 150px;
            padding: 0.5rem 0.75rem;
            background: rgba(26, 15, 10, 0.6);
            border: 1px solid var(--stone);
            border-radius: 4px;
            color: var(--off-white);
            font-family: 'Crimson Pro', serif;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .timestamp-input input:focus {
            outline: none;
            border-color: var(--bronze);
            background: rgba(26, 15, 10, 0.8);
        }

        .timestamp-input input::placeholder {
            color: var(--stone);
        }

        .timestamp-input button {
            padding: 0.5rem 1.25rem;
            background: transparent;
            color: var(--paper);
            border: 1px solid var(--stone);
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-weight: 400;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .timestamp-input button:hover {
            background: rgba(205, 127, 50, 0.1);
            border-color: var(--bronze);
            color: var(--bronze);
        }

        .saved-timestamp {
            margin-top: 0.75rem;
            padding: 0.5rem 1rem;
            background: rgba(0, 168, 107, 0.15);
            border-left: 3px solid var(--jade);
            border-radius: 4px;
            color: var(--jade);
            font-family: 'Crimson Pro', serif;
            font-weight: 400;
            font-size: 0.9rem;
        }

        .section-title {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            font-weight: 400;
            color: var(--gold);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-bottom: 1.5rem;
            padding-left: 1rem;
            border-left: 4px solid var(--gold);
        }

        .achievements-grid {
            display: grid;
            gap: 1.5rem;
        }

        .achievement-category {
            background: linear-gradient(135deg, var(--stone) 0%, var(--light-stone) 100%);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--bronze);
            box-shadow: 0 8px 32px var(--shadow);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--gold);
        }

        .category-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .category-progress {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.2rem;
            color: var(--paper);
            font-weight: 600;
        }

        .achievement-list {
            display: grid;
            gap: 1rem;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--charcoal);
            border-radius: 8px;
            border: 2px solid var(--stone);
            transition: all 0.3s ease;
        }

        .achievement-item:hover {
            border-color: var(--bronze);
            transform: translateX(5px);
        }

        .achievement-item.completed {
            background: linear-gradient(135deg, rgba(0, 168, 107, 0.2) 0%, rgba(0, 139, 90, 0.2) 100%);
            border-color: var(--jade);
        }

        .achievement-checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--gold);
        }

        .achievement-badge {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            font-size: 1.2rem;
            border: 3px solid;
            flex-shrink: 0;
        }

        .badge-bronze {
            background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%);
            border-color: #CD7F32;
            color: var(--off-white);
        }

        .badge-silver {
            background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%);
            border-color: #C0C0C0;
            color: var(--charcoal);
        }

        .badge-gold {
            background: linear-gradient(135deg, var(--gold) 0%, var(--bronze) 100%);
            border-color: var(--gold);
            color: var(--charcoal);
        }

        .badge-platinum {
            background: linear-gradient(135deg, #E5E4E2 0%, #B4B4B4 100%);
            border-color: #E5E4E2;
            color: var(--charcoal);
            box-shadow: 0 0 20px rgba(229, 228, 226, 0.5);
        }

        .achievement-info {
            flex: 1;
        }

        .achievement-name {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--off-white);
            margin-bottom: 0.25rem;
        }

        .achievement-description {
            color: var(--paper);
            font-size: 0.95rem;
            line-height: 1.4;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 0.5;
                transform: translateY(-50%) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateY(-50%) scale(1.1);
            }
        }

        @keyframes checkmark {
            0% {
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.2) rotate(0deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.8rem;
                letter-spacing: 0.15em;
            }

            h1 .subtitle-inline {
                font-size: 0.9em;
            }

            .subtitle {
                font-size: 0.7rem;
                letter-spacing: 0.2em;
            }

            header {
                padding: 2rem 1rem;
                min-height: 240px;
            }

            .stats {
                grid-template-columns: 1fr 1fr;
                gap: 0;
            }

            .stat-card {
                padding: 1.5rem 1rem;
                border-right: none;
                border-bottom: 1px solid var(--stone);
            }

            .stat-card:nth-child(2n) {
                border-right: none;
            }

            .stat-card:nth-child(-n+2) {
                border-bottom: 1px solid var(--stone);
            }

            .stat-value {
                font-size: 2rem;
            }

            .tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                gap: 2rem;
            }

            .tab {
                font-size: 0.9rem;
                padding: 0.75rem 0;
                white-space: nowrap;
            }

            .controls {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
            }

            .playthrough-selector {
                width: 100%;
                min-width: 0;
            }

            .playthrough-selector select {
                width: 100%;
            }

            .button-group {
                width: 100%;
                flex-wrap: wrap;
            }

            button:not(.tab) {
                flex: 1;
                min-width: 0;
            }

            .video-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .video-checkbox {
                width: 24px;
                height: 24px;
            }

            .video-part-badge {
                align-self: flex-start;
            }

            .timestamp-section {
                margin-top: 0.75rem;
            }

            .timestamp-input {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
            }

            .timestamp-label {
                min-width: auto;
            }

            .timestamp-input input {
                flex: 1;
            }

            .section-title {
                font-size: 1.1rem;
            }

            .timestamp-input {
                flex-direction: column;
                align-items: stretch;
            }

            .timestamp-input input {
                max-width: none;
            }

            .achievement-badge {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Black Myth: <span class="subtitle-inline">Wukong</span></h1>
            <div class="subtitle">ÊÇüÁ©∫ ‚Ä¢ Journey Tracker</div>
            <a href="https://youtube.com/playlist?list=PLtI7vq-NpiU-yKp3_vFavwOVdfmbQM8ey&si=qbAg5KW2gqWXoC5I" target="_blank" class="youtube-link">
                <svg class="youtube-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
                View Playlist
            </a>
        </header>

        <div class="tabs">
            <button class="tab active" data-tab="walkthrough">Walkthrough</button>
            <button class="tab" data-tab="achievements">Achievements</button>
        </div>

        <div id="walkthrough" class="tab-content active">
            <div class="controls">
                <div class="playthrough-selector">
                    <label for="playthrough">Current Playthrough</label>
                    <select id="playthrough">
                        <option value="first">First Playthrough</option>
                        <option value="ng+1">New Game+ 1</option>
                        <option value="ng+2">New Game+ 2</option>
                        <option value="ng+3">New Game+ 3</option>
                        <option value="ng+4">New Game+ 4</option>
                        <option value="ng+5">New Game+ 5</option>
                        <option value="ng+6">New Game+ 6</option>
                        <option value="ng+7">New Game+ 7</option>
                        <option value="ng+8">New Game+ 8</option>
                        <option value="ng+9">New Game+ 9</option>
                        <option value="ng+10">New Game+ 10</option>
                    </select>
                </div>
                <div class="button-group">
                    <button class="btn-export" onclick="exportProgress()">Export Progress</button>
                    <button class="btn-reset" onclick="resetCurrentPlaythrough()">Reset Current</button>
                    <button class="btn-reset-all" onclick="resetAllProgress()">Reset All</button>
                </div>
            </div>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label">Completion</div>
                    <div class="stat-value" id="completion-percentage">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Videos Watched</div>
                    <div class="stat-value" id="videos-watched">0/26</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Time Watched</div>
                    <div class="stat-value" id="time-watched">0h 0m</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Time Progress</div>
                    <div class="stat-value" id="time-percentage">0%</div>
                </div>
            </div>

            <div class="section-title">
                <span>Just Human's 100% Walkthrough</span>
            </div>

            <div class="video-list" id="video-list"></div>
        </div>

        <div id="achievements" class="tab-content">
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label">Total Achievements</div>
                    <div class="stat-value" id="achievement-percentage">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Achievements Unlocked</div>
                    <div class="stat-value" id="achievements-count">0/48</div>
                </div>
                <div class="stat-card"></div>
                <div class="stat-card"></div>
            </div>

            <div class="achievements-grid" id="achievements-grid"></div>
        </div>
    </div>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GAME LIBRARY INTEGRATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        // Detect if running inside Game Library or standalone
        const isInGameLibrary = window.parent && window.parent !== window;
        let gameId = null;
        let trackerProgress = {};
        
        // First, try to read from URL hash (works for external trackers loaded via iframe.src)
        const hash = window.location.hash.substring(1);
        if (hash) {
            const params = new URLSearchParams(hash);
            const hashGameId = params.get('gameId');
            const progressParam = params.get('progress');
            
            if (hashGameId) {
                gameId = hashGameId;
                console.log('üìç Game ID from URL hash:', gameId);
            }
            
            if (progressParam) {
                try {
                    trackerProgress = JSON.parse(decodeURIComponent(progressParam));
                    console.log('üì¶ Progress from URL hash:', trackerProgress);
                } catch (e) {
                    console.warn('‚ö†Ô∏è Failed to parse progress from URL hash:', e);
                }
            }
        }
        
        // Fallback: check for injected window properties (for inline trackers)
        if (!gameId && isInGameLibrary) {
            gameId = window.gameLibraryGameId || null;
            trackerProgress = window.trackerProgress || {};
            console.log('üéÆ Using injected Game Library data');
        }
        
        console.log('üéÆ Running in ' + (isInGameLibrary ? 'Game Library' : 'Standalone') + ' mode');
        console.log('üìä Game ID:', gameId);
        console.log('üìä Loaded progress:', trackerProgress);
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // VIDEO AND ACHIEVEMENT DATA
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const videos = [
            { part: 1, title: "Chapter 1 Forest of Wolves Walkthrough & Guide", duration: "43:13", views: "211K", thumbnail: "01" },
            { part: 2, title: "Chapter 1 Bamboo Grove Walkthrough & Guide", duration: "34:48", views: "80K", thumbnail: "02" },
            { part: 3, title: "Chapter 1 Black Wind Cave Walkthrough & Guide", duration: "24:14", views: "56K", thumbnail: "03" },
            { part: 4, title: "Chapter 2 Sandgate Village Walkthrough & Guide", duration: "42:04", views: "161K", thumbnail: "04" },
            { part: 5, title: "Chapter 2 Fright Cliff Walkthrough & Guide", duration: "48:57", views: "104K", thumbnail: "05" },
            { part: 6, title: "Chapter 2 Yellow Wind Formation Walkthrough & Guide", duration: "36:08", views: "84K", thumbnail: "06" },
            { part: 7, title: "Chapter 2 Secret Kingdom of Sahali & Loong Dragons Walkthrough", duration: "37:18", views: "86K", thumbnail: "07" },
            { part: 8, title: "Chapter 2 Old Rattle Drum & Cellar Walkthrough & Guide", duration: "33:30", views: "77K", thumbnail: "08" },
            { part: 9, title: "Chapter 3 Snowhill Path Walkthrough & Guide", duration: "31:42", views: "101K", thumbnail: "09" },
            { part: 10, title: "Chapter 3 Pagoda Realm Walkthrough & Guide", duration: "1:03:16", views: "153K", thumbnail: "10" },
            { part: 11, title: "Chapter 3 The Great Pagoda Walkthrough & Guide", duration: "37:27", views: "99K", thumbnail: "11" },
            { part: 12, title: "Chapter 3 Bitter Lake & Ruyi Scroll Walkthrough & Guide", duration: "53:29", views: "124K", thumbnail: "12" },
            { part: 13, title: "Chapter 3 Mindfulness Cliff Walkthrough & Guide", duration: "23:25", views: "75K", thumbnail: "13" },
            { part: 14, title: "Chapter 3 Valley of Ecstasy Walkthrough & Guide", duration: "55:05", views: "113K", thumbnail: "14" },
            { part: 15, title: "Chapter 3 New Thunderclap Temple Walkthrough & Guide", duration: "54:59", views: "111K", thumbnail: "15" },
            { part: 16, title: "Chapter 4 Webbed Hollow Walkthrough & Guide", duration: "50:43", views: "110K", thumbnail: "16" },
            { part: 17, title: "Chapter 4 The Verdure Bridge & Middle Hollow Walkthrough & Guide", duration: "42:51", views: "76K", thumbnail: "17" },
            { part: 18, title: "Chapter 4 Lower Hollow & Yellow Loong Walkthrough & Guide", duration: "48:03", views: "102K", thumbnail: "18" },
            { part: 19, title: "Chapter 4 Temple of Yellow Flowers Walkthrough & Guide", duration: "29:40", views: "73K", thumbnail: "19" },
            { part: 20, title: "Chapter 4 Secret Area: Purple Cloud Mountain Walkthrough & Guide", duration: "51:09", views: "82K", thumbnail: "20" },
            { part: 21, title: "Chapter 5 Woods of Ember Walkthrough & Guide", duration: "36:58", views: "65K", thumbnail: "21" },
            { part: 22, title: "Chapter 5 Furnace Valley Walkthrough & Guide", duration: "47:53", views: "77K", thumbnail: "22" },
            { part: 23, title: "Chapter 5 Field of Fire Walkthrough & Guide", duration: "24:31", views: "56K", thumbnail: "23" },
            { part: 24, title: "Chapter 5 Secret Bishui Cave Walkthrough & Guide", duration: "32:25", views: "75K", thumbnail: "24" },
            { part: 25, title: "All Enemies & Plants Drops (Curios / Soaks & Armor) & Best Rotation Farm", duration: "53:23", views: "41K", isDLC: true, thumbnail: "25" },
            { part: 26, title: "Chapter 6 & Platinum Trophy Walkthrough & Guide (Final)", duration: "2:07:14", views: "164K", thumbnail: "26" }
        ];

        const playlistInfo = {
            creator: "Just Human",
            totalVideos: 26,
            totalViews: "961,131"
        };

        const achievements = {
            story: [
                { name: "A Duel of Destiny", description: "Defeat Erlang, the Sacred Divinity", grade: "gold" },
                { name: "A Great Gale Conquers Even the Fiercest Tiger", description: "Defeat the Tiger Vanguard", grade: "bronze" },
                { name: "A Heart of Ice and Ashes", description: "Defeat Mother of Stones", grade: "silver" },
                { name: "A Lesson in Cause and Effect", description: "Defeat the Scorpion Prince", grade: "silver" },
                { name: "A Spark of Dragon Fire", description: "Defeat the Red Boy", grade: "bronze" },
                { name: "A Strand of Silky Threads", description: "Defeat the Hundred-Eyed Daoist Master", grade: "silver" },
                { name: "Where the Mind Resides", description: "Defeat Yellowbrow", grade: "gold" },
                { name: "Within Arms' Reach", description: "Defeat Lingxuzi", grade: "bronze" }
            ],
            combat: [
                { name: "Blazing Black Wind", description: "Learn all offensive Fire spells", grade: "bronze" },
                { name: "Earthen Might", description: "Defeat Earth Wolf (Secret Boss)", grade: "silver" },
                { name: "Full Moon in the Vale", description: "Defeat all Yaoguai Chiefs in Chapters 1-6", grade: "gold" },
                { name: "Thunderous Renown", description: "Learn all offensive Thunder spells", grade: "bronze" },
                { name: "Unbroken Golden Guard", description: "Defeat Shigandang", grade: "silver" },
                { name: "Where Frost Meets Flame", description: "Defeat Yin Tiger", grade: "silver" }
            ],
            collectibles: [
                { name: "A Curious Collection", description: "Collect 50 different types of Curios", grade: "bronze" },
                { name: "An Eventful Journey", description: "Learn all secrets in the first 4 chapters", grade: "silver" },
                { name: "Brewer's Bounty", description: "Craft 10 drinks", grade: "bronze" },
                { name: "Fruits of Labor", description: "Collect 10 different types of Spirit", grade: "bronze" },
                { name: "Go With the Flow", description: "Learn all Vessel spells", grade: "bronze" },
                { name: "Seeds Sown, Fruits Reaped", description: "Collect all Spirits", grade: "gold" },
                { name: "Shifting Seasons of the Mind", description: "Collect all Luojia Fragrant Vines", grade: "bronze" },
                { name: "Swift as Wind", description: "Learn all transformations", grade: "silver" }
            ],
            progression: [
                { name: "A Life Lesson Learned", description: "Die for the first time", grade: "bronze" },
                { name: "A Monkey's Testament", description: "Reach Mount Huaguo", grade: "bronze" },
                { name: "Blazing Through the Snow", description: "Reach Chapter 3", grade: "bronze" },
                { name: "Entering the Den", description: "Reach Chapter 4", grade: "bronze" },
                { name: "Fiery Venture", description: "Reach Chapter 5", grade: "bronze" },
                { name: "Gale of the Kingdom", description: "Reach Chapter 2", grade: "bronze" },
                { name: "Nowhere to Escape", description: "Enter the Pagoda Realm", grade: "bronze" },
                { name: "The End", description: "Complete Chapter 6", grade: "gold" },
                { name: "To the South", description: "Reach Bishui Cave", grade: "bronze" },
                { name: "When Thousand Autumns Elapse", description: "Defeat all six main bosses with New Game+", grade: "gold" }
            ],
            exploration: [
                { name: "A Pound of Cure", description: "Heal using a Gourd 100 times", grade: "bronze" },
                { name: "Bodhi's Resonance", description: "Reach the True Ending", grade: "platinum" },
                { name: "Brews and Vessels", description: "Upgrade the Gourd 3 times", grade: "bronze" },
                { name: "Builder's Pastime", description: "Craft 10 different equipment", grade: "bronze" },
                { name: "Deeper Dive", description: "Enhance any equipment to +6", grade: "bronze" },
                { name: "High Spirits", description: "Drink from Gourd 100 times", grade: "bronze" },
                { name: "Key to the Chambers", description: "Find all Luojia Fragrant Vines in Chapter 3", grade: "bronze" },
                { name: "Monkey King's Welcome", description: "Defeat 1000 Yaoguais", grade: "silver" },
                { name: "Rock Solid", description: "Acquire 36 Stone Spirits", grade: "silver" },
                { name: "Seasons of the Vale", description: "Discover the Four Seasons", grade: "bronze" },
                { name: "The Bane of the Yellow Wind", description: "Defeat all Yaoguai Chiefs in Chapter 2", grade: "bronze" },
                { name: "The Gateway to a New Journey", description: "Open the first gate in Chapter 1", grade: "bronze" },
                { name: "Those Who Chant Sutras", description: "Find all monks at New Thunderclap Temple", grade: "bronze" },
                { name: "Where Tigers Dwell", description: "Defeat all Yaoguai Chiefs in Chapter 1", grade: "bronze" }
            ],
            dlc: [
                { name: "Flicker of Stone Spirits", description: "Collect all Stone Spirits (DLC)", grade: "gold" },
                { name: "Master Craftsman", description: "Upgrade all weapons to maximum level (DLC)", grade: "gold" }
            ]
        };

        let currentPlaythrough = 'first';
        let progressData = loadProgress();

        function loadProgress() {
            // Load from Game Library if available
            // The trackerProgress object contains the data directly
            if (trackerProgress && (trackerProgress.currentPlaythrough || trackerProgress.first)) {
                console.log('üì• Loading progress from Game Library:', trackerProgress);
                
                const loadedData = {
                    first: trackerProgress.first || { videos: {}, timestamps: {} },
                    'ng+1': trackerProgress['ng+1'] || { videos: {}, timestamps: {} },
                    'ng+2': trackerProgress['ng+2'] || { videos: {}, timestamps: {} },
                    'ng+3': trackerProgress['ng+3'] || { videos: {}, timestamps: {} },
                    'ng+4': trackerProgress['ng+4'] || { videos: {}, timestamps: {} },
                    'ng+5': trackerProgress['ng+5'] || { videos: {}, timestamps: {} },
                    'ng+6': trackerProgress['ng+6'] || { videos: {}, timestamps: {} },
                    'ng+7': trackerProgress['ng+7'] || { videos: {}, timestamps: {} },
                    'ng+8': trackerProgress['ng+8'] || { videos: {}, timestamps: {} },
                    'ng+9': trackerProgress['ng+9'] || { videos: {}, timestamps: {} },
                    'ng+10': trackerProgress['ng+10'] || { videos: {}, timestamps: {} },
                    achievements: trackerProgress.achievements || {}
                };
                
                if (trackerProgress.currentPlaythrough) {
                    currentPlaythrough = trackerProgress.currentPlaythrough;
                }
                
                console.log('‚úÖ Progress loaded successfully');
                console.log('   - Current playthrough:', currentPlaythrough);
                console.log('   - Videos completed:', Object.keys(loadedData[currentPlaythrough].videos).length);
                console.log('   - Achievements:', Object.keys(loadedData.achievements).length);
                
                return loadedData;
            }
            
            // Otherwise try localStorage
            const saved = localStorage.getItem('bmw-tracker-data');
            if (saved) {
                console.log('üì¶ Loading from localStorage');
                return JSON.parse(saved);
            }
            
            console.log('‚ÑπÔ∏è No saved progress (new tracker)');
            return {
                first: { videos: {}, timestamps: {} },
                'ng+1': { videos: {}, timestamps: {} },
                'ng+2': { videos: {}, timestamps: {} },
                'ng+3': { videos: {}, timestamps: {} },
                'ng+4': { videos: {}, timestamps: {} },
                'ng+5': { videos: {}, timestamps: {} },
                'ng+6': { videos: {}, timestamps: {} },
                'ng+7': { videos: {}, timestamps: {} },
                'ng+8': { videos: {}, timestamps: {} },
                'ng+9': { videos: {}, timestamps: {} },
                'ng+10': { videos: {}, timestamps: {} },
                achievements: {}
            };
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // CALCULATE TIME WATCHED
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function calculateTimeWatched() {
            const currentData = progressData[currentPlaythrough];
            let completedMinutes = 0;
            
            videos.forEach((video, index) => {
                if (currentData.videos[index]) {
                    completedMinutes += parseDuration(video.duration);
                }
            });
            
            const hours = Math.floor(completedMinutes / 60);
            const minutes = Math.floor(completedMinutes % 60);
            
            return { hours, minutes, totalMinutes: completedMinutes };
        }
        
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SAVE PROGRESS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function saveProgress() {
            // Save to localStorage
            localStorage.setItem('bmw-tracker-data', JSON.stringify(progressData));
            
            // Save to Game Library if available
            saveProgressToGameLibrary();
        }
        
        function saveProgressToGameLibrary() {
            if (!isInGameLibrary || !gameId) {
                return;
            }
            
            const progressToSave = {
                currentPlaythrough: currentPlaythrough,
                first: progressData.first,
                'ng+1': progressData['ng+1'],
                'ng+2': progressData['ng+2'],
                'ng+3': progressData['ng+3'],
                'ng+4': progressData['ng+4'],
                'ng+5': progressData['ng+5'],
                'ng+6': progressData['ng+6'],
                'ng+7': progressData['ng+7'],
                'ng+8': progressData['ng+8'],
                'ng+9': progressData['ng+9'],
                'ng+10': progressData['ng+10'],
                achievements: progressData.achievements,
                lastUpdated: new Date().toISOString()
            };
            
            // Calculate stats for display
            const currentData = progressData[currentPlaythrough];
            const completedVideos = Object.keys(currentData.videos).filter(k => currentData.videos[k]).length;
            const totalVideos = videos.length;
            const completionPercent = Math.round((completedVideos / totalVideos) * 100);
            
            // Calculate accurate time watched from video durations
            const timeData = calculateTimeWatched();
            
            // Send to Game Library
            window.parent.postMessage({
                type: 'TRACKER_PROGRESS_UPDATE',
                gameId: gameId,
                checkboxId: 'bmw_complete_data',
                checked: true,
                allProgress: progressToSave
            }, '*');
            
            // Also send overall game stats
            window.parent.postMessage({
                type: 'TRACKER_SYNC',
                gameId: gameId,
                hours: timeData.hours + (timeData.minutes >= 30 ? 1 : 0), // Round to nearest hour
                progress: completionPercent
            }, '*');
            
            console.log('‚úÖ Synced to Game Library:', {
                playthrough: currentPlaythrough,
                completion: completionPercent + '%',
                videos: completedVideos + '/' + totalVideos,
                achievements: Object.keys(progressData.achievements).length,
                time: timeData.hours + 'H ' + timeData.minutes + 'M'
            });
            
            showSyncNotification();
        }
        
        function showSyncNotification() {
            // Check if notification already exists
            if (document.querySelector('.sync-notification')) return;
            
            const notification = document.createElement('div');
            notification.className = 'sync-notification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.75rem;
                box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
                z-index: 99999;
                font-weight: 600;
                font-family: system-ui, -apple-system, sans-serif;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = '‚úì Synced to Library';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        function parseDuration(duration) {
            const parts = duration.split(':');
            let minutes = 0;
            if (parts.length === 3) {
                minutes = parseInt(parts[0]) * 60 + parseInt(parts[1]);
            } else {
                minutes = parseInt(parts[0]);
            }
            return minutes;
        }

        function formatTime(minutes) {
            const hours = Math.floor(minutes / 60);
            const mins = minutes % 60;
            return `${hours}h ${mins}m`;
        }

        function updateStats() {
            const currentData = progressData[currentPlaythrough];
            const completedVideos = Object.values(currentData.videos).filter(v => v).length;
            const totalVideos = videos.length;
            const completionPercentage = Math.round((completedVideos / totalVideos) * 100);

            let totalMinutes = 0;
            let watchedMinutes = 0;

            videos.forEach((video, index) => {
                const duration = parseDuration(video.duration);
                totalMinutes += duration;
                if (currentData.videos[index]) {
                    watchedMinutes += duration;
                }
            });

            const timePercentage = Math.round((watchedMinutes / totalMinutes) * 100);

            document.getElementById('completion-percentage').textContent = `${completionPercentage}%`;
            document.getElementById('videos-watched').textContent = `${completedVideos}/${totalVideos}`;
            document.getElementById('time-watched').textContent = formatTime(watchedMinutes);
            document.getElementById('time-percentage').textContent = `${timePercentage}%`;

            // Update achievements
            const achievementsData = progressData.achievements;
            let totalAchievements = 0;
            let completedAchievements = 0;

            Object.values(achievements).forEach(category => {
                category.forEach(achievement => {
                    totalAchievements++;
                    if (achievementsData[achievement.name]) {
                        completedAchievements++;
                    }
                });
            });

            const achievementPercentage = Math.round((completedAchievements / totalAchievements) * 100);
            document.getElementById('achievement-percentage').textContent = `${achievementPercentage}%`;
            document.getElementById('achievements-count').textContent = `${completedAchievements}/${totalAchievements}`;
        }

        function renderVideos() {
            const videoList = document.getElementById('video-list');
            const currentData = progressData[currentPlaythrough];
            
            videoList.innerHTML = videos.map((video, index) => {
                const isCompleted = currentData.videos[index] || false;
                const savedTimestamp = currentData.timestamps[index] || '';
                
                return `
                    <div class="video-item ${isCompleted ? 'completed' : ''}" data-index="${index}">
                        <div class="video-header">
                            <input type="checkbox" class="video-checkbox" ${isCompleted ? 'checked' : ''} 
                                   onchange="toggleVideo(${index})">
                            <div class="video-info">
                                <div class="video-title">
                                    <span class="part-number">Part ${video.part}</span> - ${video.title}
                                </div>
                                <div class="video-meta">
                                    <span class="video-duration">Duration: ${video.duration}</span>
                                </div>
                            </div>
                            <span class="video-part-badge">Part ${video.part}</span>
                        </div>
                        ${!isCompleted ? `
                        <div class="timestamp-section">
                            <div class="timestamp-input">
                                <span class="timestamp-label">Paused At:</span>
                                <input type="text" placeholder="00:00:00" 
                                       value="${savedTimestamp}" 
                                       onchange="saveTimestamp(${index}, this.value)">
                                <button onclick="saveTimestamp(${index}, this.previousElementSibling.value)">Save</button>
                            </div>
                            ${savedTimestamp ? `<div class="saved-timestamp">‚è± Saved: ${savedTimestamp}</div>` : ''}
                        </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function renderAchievements() {
            const achievementsGrid = document.getElementById('achievements-grid');
            const achievementsData = progressData.achievements;
            
            achievementsGrid.innerHTML = Object.entries(achievements).map(([category, items]) => {
                const completed = items.filter(item => achievementsData[item.name]).length;
                const total = items.length;
                const percentage = Math.round((completed / total) * 100);
                
                const categoryTitles = {
                    story: 'Story Achievements',
                    combat: 'Combat Mastery',
                    collectibles: 'Collector',
                    progression: 'Journey Progress',
                    exploration: 'Explorer',
                    dlc: 'DLC Content'
                };
                
                return `
                    <div class="achievement-category">
                        <div class="category-header">
                            <h3 class="category-title">${categoryTitles[category]}</h3>
                            <div class="category-progress">${completed}/${total} (${percentage}%)</div>
                        </div>
                        <div class="achievement-list">
                            ${items.map(item => {
                                const isCompleted = achievementsData[item.name] || false;
                                return `
                                    <div class="achievement-item ${isCompleted ? 'completed' : ''}">
                                        <input type="checkbox" class="achievement-checkbox" ${isCompleted ? 'checked' : ''} 
                                               onchange="toggleAchievement('${item.name}')">
                                        <div class="achievement-badge badge-${item.grade}">
                                            ${item.grade === 'platinum' ? '‚óÜ' : item.grade === 'gold' ? '‚óà' : item.grade === 'silver' ? '‚óá' : '‚óÜ'}
                                        </div>
                                        <div class="achievement-info">
                                            <div class="achievement-name">${item.name}</div>
                                            <div class="achievement-description">${item.description}</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function toggleVideo(index) {
            const currentData = progressData[currentPlaythrough];
            currentData.videos[index] = !currentData.videos[index];
            
            if (currentData.videos[index]) {
                delete currentData.timestamps[index];
            }
            
            saveProgress();
            renderVideos();
            updateStats();
        }

        function saveTimestamp(index, timestamp) {
            if (timestamp.trim()) {
                progressData[currentPlaythrough].timestamps[index] = timestamp.trim();
            } else {
                delete progressData[currentPlaythrough].timestamps[index];
            }
            saveProgress();
            renderVideos();
        }

        function toggleAchievement(name) {
            progressData.achievements[name] = !progressData.achievements[name];
            if (!progressData.achievements[name]) {
                delete progressData.achievements[name];
            }
            saveProgress();
            renderAchievements();
            updateStats();
        }

        function exportProgress() {
            const dataStr = JSON.stringify(progressData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `bmw-tracker-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function resetCurrentPlaythrough() {
            if (confirm(`Are you sure you want to reset ${currentPlaythrough === 'first' ? 'First Playthrough' : currentPlaythrough.toUpperCase()}? This cannot be undone.`)) {
                progressData[currentPlaythrough] = { videos: {}, timestamps: {} };
                saveProgress();
                renderVideos();
                updateStats();
            }
        }

        function resetAllProgress() {
            if (confirm('Are you sure you want to reset ALL progress including achievements? This cannot be undone.')) {
                if (confirm('This will delete everything. Are you absolutely sure?')) {
                    progressData = {
                        first: { videos: {}, timestamps: {} },
                        'ng+1': { videos: {}, timestamps: {} },
                        'ng+2': { videos: {}, timestamps: {} },
                        'ng+3': { videos: {}, timestamps: {} },
                        'ng+4': { videos: {}, timestamps: {} },
                        'ng+5': { videos: {}, timestamps: {} },
                        'ng+6': { videos: {}, timestamps: {} },
                        'ng+7': { videos: {}, timestamps: {} },
                        'ng+8': { videos: {}, timestamps: {} },
                        'ng+9': { videos: {}, timestamps: {} },
                        'ng+10': { videos: {}, timestamps: {} },
                        achievements: {}
                    };
                    saveProgress();
                    renderVideos();
                    renderAchievements();
                    updateStats();
                }
            }
        }

        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // Playthrough selector
        document.getElementById('playthrough').addEventListener('change', (e) => {
            currentPlaythrough = e.target.value;
            renderVideos();
            updateStats();
        });

        // Listen for manual sync requests from Game Library
        window.addEventListener('message', (event) => {
            if (event.data && event.data.type === 'REQUEST_PROGRESS_SYNC') {
                console.log('üì• Received manual sync request from Game Library');
                
                // Trigger sync to library (this function handles everything)
                saveProgressToGameLibrary();
            }
        });

        // Initialize
        renderVideos();
        renderAchievements();
        updateStats();
    </script>
</body>
</html>